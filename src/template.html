<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inf - Diagram Note-Taking</title>
    <style>
<!-- CSS -->
    </style>
</head>
<body>
    <div id="app-layout">
        <div id="sidebar">
            <div id="controls">
        <h3 id="app-title">Inf</h3>

        <div class="node-types">
            <h4>Node Types</h4>
            <div class="node-type-buttons">
                <button onclick="setNodeType('rectangle')" class="node-btn active" id="btn-rectangle">Rectangle</button>
                <button onclick="setNodeType('circle')" class="node-btn" id="btn-circle">Circle</button>
                <button onclick="setNodeType('diamond')" class="node-btn" id="btn-diamond">Diamond</button>
                <button onclick="setNodeType('text')" class="node-btn" id="btn-text">Text</button>
                <button onclick="setNodeType('code')" class="node-btn" id="btn-code">Code</button>
                <button onclick="setNodeType('table')" class="node-btn" id="btn-table">Table</button>
            </div>
        </div>

        <div class="node-types">
            <h4>Text Alignment</h4>
            <div class="text-align-buttons">
                <button onclick="setTextAlign('left')" class="node-btn" id="btn-align-left">L</button>
                <button onclick="setTextAlign('center')" class="node-btn active" id="btn-align-center">C</button>
                <button onclick="setTextAlign('right')" class="node-btn" id="btn-align-right">R</button>
            </div>
        </div>

        <div class="node-types">
            <h4>Canvas Size</h4>
            <div class="node-type-buttons">
                <button onclick="increaseCanvasSize()" class="node-btn">Larger +</button>
                <button onclick="decreaseCanvasSize()" class="node-btn">Smaller ‚àí</button>
            </div>
        </div>

        <div class="node-types">
            <h4>Zoom</h4>
            <div class="node-type-buttons">
                <button onclick="zoomIn()" class="node-btn">Zoom In +</button>
                <button onclick="zoomOut()" class="node-btn">Zoom Out ‚àí</button>
            </div>
        </div>

        <div class="node-types">
            <h4>Connection Type</h4>
            <div class="node-type-buttons">
                <button onclick="setConnectionType(true)" class="node-btn" id="btn-directed">Directed ‚Üí</button>
                <button onclick="setConnectionType(false)" class="node-btn" id="btn-undirected">Undirected ‚Äî</button>
            </div>
        </div>

        <div class="node-types">
            <h4>Align Nodes</h4>
            <div class="text-align-buttons">
                <button onclick="alignNodes('center-h')" class="node-btn" id="btn-align-nodes-center-h" title="Align Center Horizontal">Align H</button>
                <button onclick="alignNodes('center-v')" class="node-btn" id="btn-align-nodes-center-v" title="Align Center Vertical">Align V</button>
            </div>
        </div>

        <div class="node-types" id="subgraph-navigation" style="display: none;">
            <h4>Navigation</h4>
            <div class="node-type-buttons">
                <button onclick="exitSubgraph()" class="node-btn">‚Üê Back to Parent</button>
            </div>
        </div>

        <div class="node-types">
            <h4>File Operations</h4>
            <div class="file-ops-buttons">
                <button onclick="saveToJSON()" class="node-btn">Save</button>
                <button onclick="document.getElementById('file-input').click()" class="node-btn">Load</button>
                <button onclick="exportToPNG()" class="node-btn">Export</button>
            </div>
        </div>

        <div class="node-types">
            <h4>Workspace</h4>
            <div class="node-type-buttons">
                <button onclick="selectWorkspaceFolder()" class="node-btn">Set Folder</button>
            </div>
        </div>

        <button onclick="clearCanvas()">Clear Canvas</button>
            </div>
            <div id="status">Ready</div>
        </div>
        <div id="canvas-container">
            <canvas id="canvas"></canvas>
        </div>
    </div>

    <input type="file" id="file-input" accept=".json" style="display: none;" onchange="loadFromJSON(event)">

    <!-- Table Size Input Modal -->
    <div id="table-modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <h2 class="modal-title">Create Table</h2>
            <p class="modal-description">Specify the table size:</p>

            <div class="table-size-inputs">
                <div class="input-group">
                    <label for="table-rows">Rows:</label>
                    <input type="number" id="table-rows" min="1" max="20" value="3">
                </div>
                <div class="input-group">
                    <label for="table-cols">Columns:</label>
                    <input type="number" id="table-cols" min="1" max="20" value="3">
                </div>
            </div>

            <div class="modal-buttons">
                <button class="modal-confirm" onclick="createTableWithSize()">Create</button>
                <button class="modal-cancel" onclick="closeTableModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Subgraph Type Selection Modal -->
    <div id="subgraph-modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <h2 class="modal-title">Create Subgraph</h2>
            <p class="modal-description">Choose how to store the subgraph data:</p>

            <div id="workspace-warning" class="workspace-warning" style="display: none;">
                ‚ö†Ô∏è <strong>Workspace folder not set!</strong> File-based subgraphs require a workspace folder. Click "Set Folder" in the sidebar first, or choose "Embedded" option.
            </div>

            <div class="modal-options">
                <div class="modal-option" onclick="selectSubgraphType('embedded')">
                    <div class="option-icon">üì¶</div>
                    <h3>Embedded</h3>
                    <p>Store subgraph data within this diagram file. Changes are automatically saved with the parent.</p>
                </div>

                <div class="modal-option" id="new-file-option" onclick="selectSubgraphType('new-file')">
                    <div class="option-icon">üìÑ</div>
                    <h3>New File</h3>
                    <p>Create a new JSON file in workspace folder (relative path). Useful for organizing complex diagrams.</p>
                </div>

                <div class="modal-option" id="existing-file-option" onclick="selectSubgraphType('existing-file')">
                    <div class="option-icon">üîó</div>
                    <h3>Load Existing</h3>
                    <p>Link to an existing JSON file in workspace folder (relative path). Perfect for reusing diagrams.</p>
                </div>
            </div>

            <button class="modal-cancel" onclick="closeSubgraphModal()">Cancel</button>
        </div>
    </div>

    <script>
<!-- JS -->
    </script>
</body>
</html>
